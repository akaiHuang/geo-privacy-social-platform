<p align="center">
  <img src="https://img.shields.io/badge/React_Native-Expo_51-61DAFB?style=for-the-badge&logo=react&logoColor=black" alt="React Native" />
  <img src="https://img.shields.io/badge/React-18.2-61DAFB?style=for-the-badge&logo=react&logoColor=black" alt="React" />
  <img src="https://img.shields.io/badge/TypeScript-5.3-3178C6?style=for-the-badge&logo=typescript&logoColor=white" alt="TypeScript" />
  <img src="https://img.shields.io/badge/Firebase-10.7-FFCA28?style=for-the-badge&logo=firebase&logoColor=black" alt="Firebase" />
  <img src="https://img.shields.io/badge/Mapbox-GL_3.16-000000?style=for-the-badge&logo=mapbox&logoColor=white" alt="Mapbox" />
</p>

# Geo-Privacy Social Platform

### Location-Aware Social Network with 2km Privacy Fuzzing

> A **dual-platform social application** (mobile + web) that enables location-based content sharing while protecting user privacy through a **2km location fuzzing algorithm** using the Haversine formula.
>
> å…·å‚™åœ°ç†éš±ç§ä¿è­·çš„ç¤¾äº¤å¹³å° -- é€é Haversine å…¬å¼å¯¦ç¾ 2 å…¬é‡Œä½ç½®æ¨¡ç³ŠåŒ–ï¼ŒåŒæ™‚æ”¯æ´ React Native è¡Œå‹•ç«¯èˆ‡ React Web ç«¯ã€‚

## About

Geo-Privacy Social Platform æ˜¯ä¸€æ¬¾éš±ç§å„ªå…ˆçš„åœ°ç†ç¤¾äº¤æ‡‰ç”¨ï¼Œé€éä½ç½®æ¨¡ç³ŠåŒ–ç­‰æ©Ÿåˆ¶åœ¨ã€Œå¯åˆ†äº«ã€èˆ‡ã€Œå¯ä¿è­·ã€ä¹‹é–“å–å¾—å¹³è¡¡ã€‚é©åˆç”¨æ–¼åœ°ç†å…§å®¹ç”¢å“çš„åŸå‹é©—è­‰ï¼Œæˆ–ä½œç‚ºä½ç½®éš±ç§è¨­è¨ˆï¼ˆå¦‚ 2km fuzzingï¼‰èˆ‡é›™å¹³å°æ¶æ§‹çš„åƒè€ƒã€‚

## About (EN)

Geo-Privacy Social Platform is a privacy-first location-aware social product that balances discoverability with user safety. It demonstrates geolocation sharing patterns with protective mechanisms such as location fuzzing.

## ğŸ“‹ Quick Summary

> ğŸ”’ **Geo-Privacy Social Platform** æ˜¯ä¸€æ¬¾ä»¥ã€Œéš±ç§å„ªå…ˆã€ç‚ºæ ¸å¿ƒè¨­è¨ˆç†å¿µçš„åœ°ç†ç¤¾äº¤å¹³å°ã€‚ğŸ“± æ”¯æ´é›™å¹³å°æ¶æ§‹â€”â€”React Native (Expo 51) è¡Œå‹• App åŠ ä¸Š React (Vite) Web Appï¼Œå…±äº«æ ¸å¿ƒé‚è¼¯ã€‚ğŸ—ºï¸ æœ€å¤§ç‰¹è‰²æ˜¯ **2km ä½ç½®æ¨¡ç³ŠåŒ–æ¼”ç®—æ³•**ï¼šæ¯å‰‡è²¼æ–‡ç™¼å¸ƒæ™‚è‡ªå‹•å¥—ç”¨éš¨æ©Ÿä½ç½®åç§»ï¼Œç¢ºä¿ä½¿ç”¨è€…çœŸå¯¦ä½ç½®ä¸è¢«æš´éœ²ã€‚ğŸ“ é‹ç”¨ Haversine çƒé¢è·é›¢å…¬å¼é€²è¡Œç²¾ç¢ºçš„é™„è¿‘å…§å®¹æ¢ç´¢ï¼Œåœ¨éš±ç§ä¿è­·èˆ‡ç¤¾äº¤åŠŸèƒ½é–“å–å¾—å®Œç¾å¹³è¡¡ã€‚ğŸ’¬ å®Œæ•´ç¤¾äº¤åŠŸèƒ½æ¶µè“‹å³æ™‚è²¼æ–‡ã€ç•™è¨€ã€æŒ‰è®šã€å¥½å‹ç³»çµ±ã€é€šçŸ¥ã€æ”¶è—èˆ‡å°é–æ©Ÿåˆ¶ã€‚ğŸ—„ï¸ Firestore å¾Œç«¯è¨­è¨ˆäº† 10 å€‹é›†åˆæ­é… 148 è¡Œå®‰å…¨è¦å‰‡ï¼Œå¯¦ç¾åˆ—ç´šå­˜å–æ§åˆ¶ã€‚ğŸ• ç¨ç‰¹çš„æ™‚é–“æ—…è¡ŒåŠŸèƒ½è®“ä½¿ç”¨è€…é€éæ™‚é–“è»¸æ»‘æ¡¿æ¢ç´¢æ­·å²å…§å®¹ã€‚ğŸ› ï¸ æŠ€è¡“æ£§åŒ…å« TypeScript 5.3ã€Mapbox GLã€Firebase Auth/Storageï¼Œå…±è¨ˆ 63 å€‹ TS æª”æ¡ˆç´„ 10,460 è¡Œç¨‹å¼ç¢¼ã€‚é©åˆéœ€è¦ä½ç½®æ„ŸçŸ¥ä½†é‡è¦–éš±ç§ä¿è­·çš„ç¤¾äº¤æ‡‰ç”¨å ´æ™¯ã€‚

---

## â­ Highlights / å°ˆæ¡ˆäº®é»

| Feature | Description |
|---------|-------------|
| **2km Privacy Fuzzing** | æ¯æ¬¡ç™¼æ–‡è‡ªå‹•å¥—ç”¨éš¨æ©Ÿä½ç½®åç§»ï¼ˆæœ€å¤§ 2kmï¼‰ï¼Œä¿è­·ä½¿ç”¨è€…çœŸå¯¦ä½ç½® |
| **Dual Platform** | React Native (Expo) è¡Œå‹• App + React (Vite) Web Appï¼Œå…±äº«æ ¸å¿ƒé‚è¼¯ |
| **Haversine Distance** | ä½¿ç”¨ Haversine å…¬å¼ç²¾ç¢ºè¨ˆç®—çƒé¢è·é›¢ï¼Œæ”¯æ´é™„è¿‘å…§å®¹æ¢ç´¢ |
| **148-line Security Rules** | Firestore å®‰å…¨è¦å‰‡æ¶µè“‹ 10 å€‹é›†åˆï¼Œç¢ºä¿è³‡æ–™å±¤ç´šçš„å­˜å–æ§åˆ¶ |
| **Real-time Social** | å³æ™‚è²¼æ–‡ã€ç•™è¨€ã€æŒ‰è®šã€å¥½å‹ç³»çµ±ã€é€šçŸ¥ã€æ”¶è—ã€å°é–æ©Ÿåˆ¶ |
| **Mapbox Integration** | äº’å‹•å¼åœ°åœ–ç€è¦½ï¼Œçµåˆæ™‚é–“è»¸æ»‘æ¡¿çš„æ™‚ç©ºå…§å®¹æ¢ç´¢ |

---

## ğŸ—ï¸ Architecture / ç³»çµ±æ¶æ§‹

```
geo-privacy-social-platform/
â”‚
â”œâ”€â”€ App.tsx                          # Mobile Entry Point
â”‚                                    # èªè­‰ç‹€æ…‹ç®¡ç†ã€è·¯ç”±åˆ‡æ›
â”‚
â”œâ”€â”€ src/                             # Mobile App (React Native / Expo)
â”‚   â”œâ”€â”€ screens/                     # 5 screens
â”‚   â”‚   â”œâ”€â”€ AuthScreen.tsx           #   ç™»å…¥ / è¨»å†Š
â”‚   â”‚   â”œâ”€â”€ FeedScreen.tsx           #   å‹•æ…‹ç‰†
â”‚   â”‚   â”œâ”€â”€ MapScreen.tsx            #   åœ°åœ–ç€è¦½
â”‚   â”‚   â”œâ”€â”€ PostCreateScreen.tsx     #   ç™¼æ–‡ï¼ˆå«ä½ç½®æ¨¡ç³ŠåŒ–ï¼‰
â”‚   â”‚   â””â”€â”€ ProfileScreen.tsx        #   å€‹äººæª”æ¡ˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                  # Reusable UI Components
â”‚   â”‚   â”œâ”€â”€ common/                  #   Button, Input, Modal
â”‚   â”‚   â”œâ”€â”€ feed/                    #   FeedList
â”‚   â”‚   â”œâ”€â”€ map/                     #   MapView, LocationPicker
â”‚   â”‚   â”œâ”€â”€ post/                    #   PostCard, PostEditor, MediaUploader
â”‚   â”‚   â””â”€â”€ profile/                 #   ProfileHeader, ProfileWall
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                    # Backend Services
â”‚   â”‚   â”œâ”€â”€ firebase.ts              #   Firestore CRUD (11.7KB)
â”‚   â”‚   â”œâ”€â”€ auth.ts                  #   Firebase Authentication
â”‚   â”‚   â”œâ”€â”€ location.ts              #   Location + privacy offset
â”‚   â”‚   â””â”€â”€ storage.ts               #   Media file storage
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                       # Custom React Hooks
â”‚   â”‚   â”œâ”€â”€ useAuth.ts               #   Authentication state
â”‚   â”‚   â”œâ”€â”€ usePosts.ts              #   Post CRUD + real-time sync
â”‚   â”‚   â”œâ”€â”€ useComments.ts           #   Comment management
â”‚   â”‚   â””â”€â”€ useLocation.ts           #   Location tracking
â”‚   â”‚
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ locationRandomizer.ts    #   2km fuzzing + Haversine formula
â”‚       â”œâ”€â”€ timeSlot.ts              #   Time-based content filtering
â”‚       â”œâ”€â”€ validators.ts            #   Input validation
â”‚       â””â”€â”€ constants.ts             #   App-wide constants
â”‚
â”œâ”€â”€ web/                             # Web App (React + Vite)
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ App.tsx                  #   Main web app (70.7KB)
â”‚       â”œâ”€â”€ components/              #   18 web components
â”‚       â”‚   â”œâ”€â”€ ProfilePage.tsx      #     User profiles
â”‚       â”‚   â”œâ”€â”€ FullscreenPostViewer #     Immersive post viewing
â”‚       â”‚   â”œâ”€â”€ EditProfileModal.tsx #     Profile editing
â”‚       â”‚   â”œâ”€â”€ TimeSlider.tsx       #     Time-travel exploration
â”‚       â”‚   â””â”€â”€ MapboxView.tsx       #     Mapbox GL integration
â”‚       â”œâ”€â”€ services/                #   Firebase + analytics
â”‚       â”œâ”€â”€ hooks/                   #   Auth, posts, comments, notifications
â”‚       â””â”€â”€ pages/                   #   Auth, Feed, Map, Notifications
â”‚
â”œâ”€â”€ firestore.rules                  # Security Rules (148 lines)
â”‚                                    # 10 collections with row-level access control
â”‚
â””â”€â”€ firebase.json                    # Firebase configuration
```

---

## ğŸ› ï¸ Tech Stack / æŠ€è¡“æ£§

```
  Mobile        React Native 0.74  +  Expo 51  |  iOS & Android
  Web           React 18  +  Vite 5  +  React Router 6
  Language      TypeScript 5.3  |  63 TS files, ~10,460 lines
  Backend       Firebase / Firestore  |  10 collections
  Maps          Mapbox GL 3.16  |  Leaflet  |  Google Maps API
  Auth          Firebase Authentication
  Storage       Firebase Storage (images, videos)
  Location      expo-location  +  Haversine formula
  Privacy       2km random offset on every post
```

---

## ğŸ” Privacy Engineering / éš±ç§å·¥ç¨‹

### 2km Location Fuzzing Algorithm / ä½ç½®æ¨¡ç³ŠåŒ–æ¼”ç®—æ³•

Every user-generated post automatically applies a **random location offset** within a 2km radius to prevent exact position exposure:

```typescript
// locationRandomizer.ts
const maxOffset = 0.018;  // ~2km in degrees latitude

const randomLat = (Math.random() - 0.5) * 2 * maxOffset;
const randomLng = (Math.random() - 0.5) * 2 * maxOffset;

return {
  latitude:  original.latitude  + randomLat,
  longitude: original.longitude + randomLng,
};
```

### Haversine Distance Calculation / çƒé¢è·é›¢è¨ˆç®—

Used for proximity-based content discovery within privacy boundaries:

```typescript
// Haversine formula for great-circle distance
const R = 6371;  // Earth radius in km
const dLat = toRad(loc2.latitude - loc1.latitude);
const dLon = toRad(loc2.longitude - loc1.longitude);

const a = sin(dLat/2)^2 + cos(lat1) * cos(lat2) * sin(dLon/2)^2;
const c = 2 * atan2(sqrt(a), sqrt(1-a));
const distance = R * c;  // Result in kilometers
```

### Privacy Flow / éš±ç§ä¿è­·æµç¨‹

```
User's Real Location
        |
        v
  [addLocationRandomOffset()]
        |
        v
  Fuzzed Location (+/- 2km)
        |
        v
  [Stored in Firestore]     -->  [Displayed on Map]
                                  (approximate area only)
```

---

## ğŸ—„ï¸ Firestore Data Model / è³‡æ–™æ¨¡å‹

### 10 Collections with Security Rules / 10 å€‹é›†åˆèˆ‡å®‰å…¨è¦å‰‡

| Collection | Description | Access Control |
|------------|-------------|----------------|
| `users` | User profiles / ä½¿ç”¨è€…æª”æ¡ˆ | Owner read/write only |
| `posts` | Location-tagged posts / ä½ç½®è²¼æ–‡ | Public read, owner write |
| `comments` | Post comments / ç•™è¨€ | Public read, author write |
| `likes` | Like records / æŒ‰è®šç´€éŒ„ | Public read, author create/delete |
| `friend_requests` | Friend requests / å¥½å‹è«‹æ±‚ | Sender/receiver access |
| `friendships` | Friend relationships / å¥½å‹é—œä¿‚ | Both parties access |
| `blocks` | Block records / å°é–ç´€éŒ„ | Blocker access only |
| `notifications` | Push notifications / é€šçŸ¥ | Recipient access only |
| `favorites` | Saved posts / æ”¶è— | Owner access only |
| `view_history` | View history / ç€è¦½æ­·å² | Owner access only |

### Security Rule Highlights / å®‰å…¨è¦å‰‡é‡é»

```javascript
// Immutable fields protection / ä¸å¯è®Šæ¬„ä½ä¿è­·
allow update: if request.resource.data.createdAt == resource.data.createdAt;

// Identity verification / èº«ä»½é©—è­‰
allow create: if request.resource.data.userId == request.auth.uid;

// Cross-user isolation / è·¨ä½¿ç”¨è€…éš”é›¢
allow read: if resource.data.userId == request.auth.uid;
```

---

## ğŸ Quick Start / å¿«é€Ÿé–‹å§‹

### Mobile App (React Native + Expo)

```bash
# Install dependencies
npm install

# Start Expo development server
npm start

# Run on specific platform
npm run ios        # iOS simulator
npm run android    # Android emulator
npm run web        # Web browser
```

### Web App (React + Vite)

```bash
cd web

# Install dependencies
npm install

# Start development server
npm run dev

# Build for production
npm run build

# Deploy to Firebase Hosting
npm run deploy
```

### Firebase Setup / Firebase è¨­å®š

```bash
# 1. Create a Firebase project at console.firebase.google.com
# 2. Enable Authentication (Email/Password)
# 3. Create a Firestore database
# 4. Update src/config/firebase.ts with your config
# 5. Deploy security rules
firebase deploy --only firestore:rules
```

---

## ğŸš€ Features / åŠŸèƒ½åˆ—è¡¨

### Social / ç¤¾äº¤åŠŸèƒ½
- User registration and authentication / ä½¿ç”¨è€…è¨»å†Šèˆ‡èªè­‰
- User profiles with customizable URLs / å¯è‡ªè¨‚ URL çš„å€‹äººæª”æ¡ˆ
- Post creation with text, images, and video / åœ–æ–‡å½±éŸ³ç™¼æ–‡
- Comment and like system / ç•™è¨€èˆ‡æŒ‰è®šç³»çµ±
- Friend request and friendship management / å¥½å‹è«‹æ±‚èˆ‡ç®¡ç†
- User blocking / ä½¿ç”¨è€…å°é–
- Notification system / é€šçŸ¥ç³»çµ±
- Favorites / bookmarks / æ”¶è—åŠŸèƒ½

### Location / ä½ç½®åŠŸèƒ½
- GPS-based location tagging / GPS å®šä½æ¨™è¨˜
- 2km privacy fuzzing on all posts / æ‰€æœ‰è²¼æ–‡è‡ªå‹• 2km æ¨¡ç³ŠåŒ–
- Haversine distance-based nearby discovery / åŸºæ–¼çƒé¢è·é›¢çš„é™„è¿‘æ¢ç´¢
- Interactive Mapbox map view / äº’å‹•å¼ Mapbox åœ°åœ–
- Reverse geocoding / åå‘åœ°ç†ç·¨ç¢¼
- Location permission management / ä½ç½®æ¬Šé™ç®¡ç†

### Time Travel / æ™‚é–“æ¢ç´¢
- Timeline slider for historical content / æ™‚é–“è»¸æ»‘æ¡¿ç€è¦½æ­·å²å…§å®¹
- Time-slot based content filtering / åŸºæ–¼æ™‚æ®µçš„å…§å®¹ç¯©é¸

---

## ğŸ“Š Project Stats / å°ˆæ¡ˆçµ±è¨ˆ

```
Total Files:       127
TypeScript Files:  63 files (~10,460 lines)
Mobile App:        React Native + Expo 51
Web App:           React 18 + Vite 5
Security Rules:    148 lines (10 collections)
Platforms:         iOS, Android, Web
```

---

## ğŸ“„ License

MIT License

---

<p align="center">
  <sub>Built with React Native, Firebase, and Mapbox for privacy-aware social networking.</sub>
  <br />
  <sub>çµåˆ React Nativeã€Firebase èˆ‡ Mapbox æ‰“é€ çš„éš±ç§å„ªå…ˆç¤¾äº¤å¹³å°ã€‚</sub>
</p>
