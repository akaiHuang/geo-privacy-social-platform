# ç¤¾äº¤åœ°åœ– App - æ¶æ§‹æ–‡æª”

## è»Ÿé«”æ¦‚è¿°

ä¸€å€‹åŸºæ–¼åœ°ç†ä½ç½®çš„ç¤¾äº¤æ‡‰ç”¨ç¨‹å¼ï¼Œç”¨æˆ¶å¯ä»¥åœ¨åœ°åœ–ä¸Šç™¼å¸ƒå’Œæ¢ç´¢å¸¶æœ‰ä½ç½®ä¿¡æ¯çš„å…§å®¹ï¼ˆæ–‡å­—ã€åœ–ç‰‡ã€å½±ç‰‡ï¼‰ã€‚

## æ ¸å¿ƒåŠŸèƒ½å–®å…ƒ

### 1. ğŸ—ºï¸ åœ°åœ–æ¨¡çµ„ (Map Module)
**ä½ç½®**: `src/screens/MapScreen.tsx`, `src/components/map/`

**åŠŸèƒ½**:
- é¡¯ç¤ºåœ°åœ–è¦–åœ–
- æ¨™è¨˜é™„è¿‘ç”¨æˆ¶çš„è²¼æ–‡ä½ç½®
- é»æ“Šæ¨™è¨˜æŸ¥çœ‹è²¼æ–‡è©³æƒ…
- é¡¯ç¤ºç•¶å‰ç”¨æˆ¶ä½ç½®

**é—œéµçµ„ä»¶**:
- `MapViewComponent` - åœ°åœ–ä¸»è¦–åœ–
- `PostMarker` - è²¼æ–‡ä½ç½®æ¨™è¨˜
- `LocationPicker` - ä½ç½®é¸æ“‡å™¨

**éš±ç§ä¿è­·**:
- æ‰€æœ‰è²¼æ–‡ä½ç½®è‡ªå‹•æ·»åŠ  2 å…¬é‡Œéš¨æ©Ÿèª¤å·®
- ä½¿ç”¨ `locationRandomizer.ts` å¯¦ç¾ä½ç½®æ¨¡ç³ŠåŒ–

---

### 2. ğŸ” æ¢ç´¢å‹•æ…‹ç‰† (Feed Module)
**ä½ç½®**: `src/screens/FeedScreen.tsx`, `src/components/feed/`

**åŠŸèƒ½**:
- æ™ºèƒ½æ¨è–¦è²¼æ–‡
- ç„¡é™æ»¾å‹•åŠ è¼‰
- ä¸‹æ‹‰åˆ·æ–°
- é»è®šå’Œè©•è«–åŠŸèƒ½

**é—œéµçµ„ä»¶**:
- `FeedList` - å‹•æ…‹åˆ—è¡¨
- `PostCard` - è²¼æ–‡å¡ç‰‡
- `RecommendationCard` - æ¨è–¦å…§å®¹å¡ç‰‡

**æ•¸æ“šæµ**:
```
usePosts Hook â†’ API Service â†’ FeedList â†’ PostCard
```

---

### 3. â• ç™¼æ–‡æ¨¡çµ„ (Post Creation Module)
**ä½ç½®**: `src/screens/PostCreateScreen.tsx`, `src/components/post/`

**åŠŸèƒ½**:
- æ–‡å­—å…§å®¹ç·¨è¼¯
- å¤šåª’é«”ä¸Šå‚³ï¼ˆåœ–ç‰‡/å½±ç‰‡ï¼‰
- ä½ç½®é¸æ“‡
- è‡ªå‹•ä½ç½®æ¨¡ç³ŠåŒ–

**é—œéµçµ„ä»¶**:
- `PostEditor` - æ–‡å­—ç·¨è¼¯å™¨
- `MediaUploader` - åª’é«”ä¸Šå‚³å™¨
- `LocationPicker` - ä½ç½®é¸æ“‡å™¨

**ç™¼æ–‡æµç¨‹**:
```
1. ç”¨æˆ¶è¼¸å…¥å…§å®¹
2. é¸æ“‡/ä¸Šå‚³åª’é«”
3. é¸æ“‡ä½ç½®ï¼ˆè‡ªå‹•ç²å–ç•¶å‰ä½ç½®ï¼‰
4. ç³»çµ±æ·»åŠ  2km éš¨æ©Ÿèª¤å·®
5. ç™¼é€åˆ°å¾Œç«¯
```

---

### 4. ğŸ‘¤ å€‹äººæª”æ¡ˆæ¨¡çµ„ (Profile Module)
**ä½ç½®**: `src/screens/ProfileScreen.tsx`, `src/components/profile/`

**åŠŸèƒ½**:
- é¡¯ç¤ºç”¨æˆ¶ä¿¡æ¯ï¼ˆé ­åƒã€åç¨±ã€ç°¡ä»‹ï¼‰
- è²¼æ–‡çµ±è¨ˆ
- æ­·å²è²¼æ–‡ç‰†ï¼ˆé¡ä¼¼ Instagramï¼‰
- ç·¨è¼¯å€‹äººè³‡æ–™

**é—œéµçµ„ä»¶**:
- `ProfileHeader` - å€‹äººä¿¡æ¯é ­éƒ¨
- `ProfileWall` - è²¼æ–‡ç‰†
- `BioEditor` - ç°¡ä»‹ç·¨è¼¯å™¨

**æ•¸æ“šé¡¯ç¤º**:
- ç”¨æˆ¶åŸºæœ¬ä¿¡æ¯
- è²¼æ–‡æ•¸é‡çµ±è¨ˆ
- æ™‚é–“ç·šè²¼æ–‡åˆ—è¡¨

---

## æŠ€è¡“æ¶æ§‹

### å‰ç«¯æŠ€è¡“æ£§
```
React Native (Expo)
â”œâ”€â”€ TypeScript
â”œâ”€â”€ React Navigation (å°èˆª)
â”œâ”€â”€ React Native Maps (åœ°åœ–)
â”œâ”€â”€ Expo Location (å®šä½)
â”œâ”€â”€ Expo Image Picker (åª’é«”é¸æ“‡)
â””â”€â”€ Axios (HTTP è«‹æ±‚)
```

### é …ç›®çµæ§‹
```
src/
â”œâ”€â”€ components/          # UI çµ„ä»¶
â”‚   â”œâ”€â”€ common/         # é€šç”¨çµ„ä»¶ (Button, Input, Modal)
â”‚   â”œâ”€â”€ post/           # è²¼æ–‡ç›¸é—œ (PostCard, PostEditor, MediaUploader)
â”‚   â”œâ”€â”€ map/            # åœ°åœ–ç›¸é—œ (MapView, LocationPicker)
â”‚   â”œâ”€â”€ profile/        # å€‹äººæª”æ¡ˆ (ProfileHeader, ProfileWall)
â”‚   â””â”€â”€ feed/           # å‹•æ…‹ç‰† (FeedList)
â”‚
â”œâ”€â”€ screens/            # æ‡‰ç”¨ç•«é¢
â”‚   â”œâ”€â”€ MapScreen.tsx
â”‚   â”œâ”€â”€ FeedScreen.tsx
â”‚   â”œâ”€â”€ PostCreateScreen.tsx
â”‚   â””â”€â”€ ProfileScreen.tsx
â”‚
â”œâ”€â”€ navigation/         # å°èˆªé…ç½®
â”‚   â””â”€â”€ AppNavigator.tsx
â”‚
â”œâ”€â”€ services/           # æœå‹™å±¤
â”‚   â”œâ”€â”€ api.ts          # API è«‹æ±‚å°è£
â”‚   â”œâ”€â”€ location.ts     # å®šä½æœå‹™
â”‚   â””â”€â”€ storage.ts      # æœ¬åœ°å­˜å„²
â”‚
â”œâ”€â”€ hooks/              # è‡ªå®šç¾© Hooks
â”‚   â”œâ”€â”€ useLocation.ts  # ä½ç½®ç®¡ç†
â”‚   â””â”€â”€ usePosts.ts     # è²¼æ–‡ç®¡ç†
â”‚
â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•¸
â”‚   â”œâ”€â”€ locationRandomizer.ts  # ä½ç½®éš¨æ©ŸåŒ–
â”‚   â”œâ”€â”€ validators.ts           # é©—è­‰å·¥å…·
â”‚   â””â”€â”€ constants.ts            # å¸¸é‡é…ç½®
â”‚
â””â”€â”€ types/              # TypeScript é¡å‹å®šç¾©
    â””â”€â”€ index.ts
```

---

## æ•¸æ“šæ¨¡å‹

### Post (è²¼æ–‡)
```typescript
{
  id: string
  userId: string
  user: User
  content: string
  media: Media[]
  location: Location          // æ¨¡ç³ŠåŒ–å¾Œçš„ä½ç½®
  originalLocation?: Location // çœŸå¯¦ä½ç½®ï¼ˆåƒ…å¾Œç«¯ï¼‰
  createdAt: Date
  likes: number
  comments: number
}
```

### User (ç”¨æˆ¶)
```typescript
{
  id: string
  username: string
  displayName: string
  avatar?: string
  bio?: string
  createdAt: Date
}
```

### Location (ä½ç½®)
```typescript
{
  latitude: number
  longitude: number
  address?: string
}
```

### Media (åª’é«”)
```typescript
{
  id: string
  type: 'image' | 'video'
  uri: string
  thumbnail?: string
  duration?: number
}
```

---

## æ ¸å¿ƒåŠŸèƒ½æµç¨‹

### 1. ç™¼æ–‡æµç¨‹
```
ç”¨æˆ¶è¼¸å…¥ â†’ åª’é«”é¸æ“‡ â†’ ä½ç½®é¸æ“‡ â†’ ä½ç½®æ¨¡ç³ŠåŒ– â†’ API è«‹æ±‚ â†’ æˆåŠŸåé¥‹
```

### 2. ç€è¦½æµç¨‹
```
ç²å–ç•¶å‰ä½ç½® â†’ è«‹æ±‚é™„è¿‘è²¼æ–‡ â†’ é¡¯ç¤ºåœ¨åœ°åœ–/åˆ—è¡¨ â†’ ç”¨æˆ¶äº’å‹•ï¼ˆè®šã€è©•è«–ï¼‰
```

### 3. ä½ç½®éš±ç§ä¿è­·
```typescript
çœŸå¯¦ä½ç½® (25.033, 121.565) 
    â†“ æ·»åŠ éš¨æ©Ÿèª¤å·® (Â±2km)
æ¨¡ç³Šä½ç½® (25.041, 121.573)
    â†“ å­˜å„²åˆ°æ•¸æ“šåº«
å°å¤–é¡¯ç¤ºçš„ä½ç½®
```

---

## å°èˆªçµæ§‹

```
AppNavigator (Stack)
    â””â”€â”€ TabNavigator (Bottom Tabs)
        â”œâ”€â”€ ğŸ—ºï¸ Map (åœ°åœ–)
        â”œâ”€â”€ ğŸ” Feed (æ¢ç´¢)
        â”œâ”€â”€ â• PostCreate (ç™¼æ–‡)
        â””â”€â”€ ğŸ‘¤ Profile (å€‹äºº)
```

---

## API ç«¯é»è¨­è¨ˆ

### è²¼æ–‡ API
- `GET /posts?page=1&pageSize=20` - ç²å–è²¼æ–‡åˆ—è¡¨
- `GET /posts/nearby?lat=X&lng=Y&radius=10` - ç²å–é™„è¿‘è²¼æ–‡
- `POST /posts` - å‰µå»ºè²¼æ–‡
- `POST /posts/:id/like` - é»è®š
- `GET /posts/:id/comments` - ç²å–è©•è«–

### ç”¨æˆ¶ API
- `GET /users/me` - ç²å–ç•¶å‰ç”¨æˆ¶
- `GET /users/:id/posts` - ç²å–ç”¨æˆ¶è²¼æ–‡
- `PUT /users/me` - æ›´æ–°å€‹äººè³‡æ–™

---

## æ¬Šé™éœ€æ±‚

### iOS/Android æ¬Šé™
- ğŸ“ **ä½ç½®æ¬Šé™** (å¿…é ˆ): ç²å–ç”¨æˆ¶ä½ç½®
- ğŸ“· **ç›¸æ©Ÿæ¬Šé™** (å¯é¸): æ‹ç…§åŠŸèƒ½
- ğŸ–¼ï¸ **ç›¸å†Šæ¬Šé™** (å¯é¸): é¸æ“‡åœ–ç‰‡/å½±ç‰‡

### é…ç½®ä½ç½®
- `app.json` - Expo é…ç½®
- iOS: `Info.plist` ä½ç½®æ¬Šé™èªªæ˜
- Android: `AndroidManifest.xml` æ¬Šé™è²æ˜

---

## éš±ç§ä¿è­·æ©Ÿåˆ¶

### ä½ç½®æ¨¡ç³ŠåŒ–ç®—æ³•
```typescript
// æ·»åŠ  Â±2km éš¨æ©Ÿèª¤å·®
const maxOffset = 0.018; // ç´„ 2 å…¬é‡Œ
const randomLat = (Math.random() - 0.5) * 2 * maxOffset;
const randomLng = (Math.random() - 0.5) * 2 * maxOffset;
```

### æ•¸æ“šå®‰å…¨
- åƒ…é¡¯ç¤ºæ¨¡ç³ŠåŒ–å¾Œçš„ä½ç½®
- åŸå§‹ä½ç½®åƒ…å¾Œç«¯å­˜å„²
- API è«‹æ±‚ä½¿ç”¨ HTTPS
- èªè­‰ä»¤ç‰Œå­˜å„²åœ¨æœ¬åœ°å®‰å…¨å­˜å„²

---

## æœªä¾†æ“´å±•åŠŸèƒ½

### è¨ˆåŠƒåŠŸèƒ½
- ğŸ”” æ¨é€é€šçŸ¥
- ğŸ’¬ å³æ™‚èŠå¤©
- ğŸ‘¥ å¥½å‹ç³»çµ±
- ğŸ·ï¸ æ¨™ç±¤å’Œä¸»é¡Œ
- ğŸ” é«˜ç´šæœç´¢å’Œç¯©é¸
- ğŸ“Š æ•¸æ“šåˆ†æå’Œæ´å¯Ÿ

### æŠ€è¡“å„ªåŒ–
- é›¢ç·šæ”¯æŒ
- åœ–ç‰‡å£“ç¸®å’Œå„ªåŒ–
- ç„¡é™æ»¾å‹•æ€§èƒ½å„ªåŒ–
- æ›´æ™ºèƒ½çš„æ¨è–¦ç®—æ³•

---

## é–‹ç™¼æŒ‡å—

### é–‹å§‹é–‹ç™¼
```bash
cd /Users/akaihuangm1/Desktop/brobro
npm install
npm start
```

### æ·»åŠ æ–°åŠŸèƒ½
1. åœ¨ `types/index.ts` å®šç¾©é¡å‹
2. åœ¨ `services/` æ·»åŠ  API èª¿ç”¨
3. åœ¨ `hooks/` å‰µå»ºè‡ªå®šç¾© Hook
4. åœ¨ `components/` å¯¦ç¾ UI
5. åœ¨ `screens/` çµ„åˆé é¢

### ä»£ç¢¼è¦ç¯„
- ä½¿ç”¨ TypeScript
- éµå¾ª React Hooks è¦å‰‡
- çµ„ä»¶ä¿æŒå–®ä¸€è·è²¬
- é©ç•¶çš„éŒ¯èª¤è™•ç†

---

## ç¸½çµ

é€™å€‹ç¤¾äº¤åœ°åœ–æ‡‰ç”¨åŒ…å«å››å€‹ä¸»è¦æ¨¡çµ„ï¼š
1. **åœ°åœ–è¦–åœ–** - å¯è¦–åŒ–ä½ç½®æ•¸æ“š
2. **æ¢ç´¢å‹•æ…‹** - æ¨è–¦å’Œç€è¦½å…§å®¹
3. **ç™¼æ–‡åŠŸèƒ½** - å‰µå»ºå’Œåˆ†äº«å…§å®¹
4. **å€‹äººæª”æ¡ˆ** - ç”¨æˆ¶ä¿¡æ¯å’Œæ­·å²

æ ¸å¿ƒç‰¹è‰²æ˜¯**ä½ç½®éš±ç§ä¿è­·**ï¼Œæ‰€æœ‰ä½ç½®è‡ªå‹•æ·»åŠ  2 å…¬é‡Œéš¨æ©Ÿèª¤å·®ï¼Œä¿è­·ç”¨æˆ¶çœŸå¯¦ä½ç½®ã€‚

å®Œæ•´çš„å‰ç«¯æ¶æ§‹æ¡ç”¨ React Native + Expoï¼Œé…åˆ TypeScript ç¢ºä¿é¡å‹å®‰å…¨ï¼Œä½¿ç”¨ç¾ä»£åŒ–çš„ Hooks é€²è¡Œç‹€æ…‹ç®¡ç†ã€‚
